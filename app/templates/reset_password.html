{% extends "base.html" %}

{% block title %}Passwort zurücksetzen{% endblock %}

{% block nav %}
    <a href="/">Startseite</a>
    <a href="/login">Login</a>
{% endblock %}

{% block content %}
<div style="max-width: 460px; margin: 4rem auto;">
    <div class="card">
        <div class="page-header" style="margin-bottom: 1.5rem;">
            <h1>Passwort zurücksetzen</h1>
            <p>Bitte vergeben Sie ein neues Passwort.</p>
        </div>

        {% if error %}
            <div class="alert alert-error">{{ error }}</div>
        {% endif %}

        {% if token %}
            <form method="post">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <div class="form-group">
                    <label for="password">Neues Passwort</label>
                    <div class="password-field">
                        <input id="password" name="password" type="password" minlength="8" required autofocus>
                        <button
                            type="button"
                            class="password-toggle"
                            data-toggle-password="#password"
                            aria-label="Passwort anzeigen/verbergen"
                            title="Passwort anzeigen/verbergen"
                        >
                            <svg data-eye="open" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7S2 12 2 12z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                            <svg data-eye="off" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" style="display:none;">
                                <path d="M17.94 17.94A10.94 10.94 0 0 1 12 19c-6.5 0-10-7-10-7a21.8 21.8 0 0 1 5.06-6.94"></path>
                                <path d="M1 1l22 22"></path>
                                <path d="M9.9 4.24A10.94 10.94 0 0 1 12 5c6.5 0 10 7 10 7a21.8 21.8 0 0 1-3.2 4.6"></path>
                                <path d="M14.12 14.12a3 3 0 0 1-4.24-4.24"></path>
                            </svg>
                        </button>
                    </div>
                    <p style="margin-top:0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                        Mindestens 8 Zeichen, 1 Großbuchstabe und 1 Sonderzeichen.
                    </p>
                </div>
                <div class="form-group">
                    <label for="password2">Neues Passwort wiederholen</label>
                    <div class="password-field">
                        <input id="password2" name="password2" type="password" minlength="8" required>
                        <button
                            type="button"
                            class="password-toggle"
                            data-toggle-password="#password2"
                            aria-label="Passwort anzeigen/verbergen"
                            title="Passwort anzeigen/verbergen"
                        >
                            <svg data-eye="open" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7S2 12 2 12z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                            <svg data-eye="off" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" style="display:none;">
                                <path d="M17.94 17.94A10.94 10.94 0 0 1 12 19c-6.5 0-10-7-10-7a21.8 21.8 0 0 1 5.06-6.94"></path>
                                <path d="M1 1l22 22"></path>
                                <path d="M9.9 4.24A10.94 10.94 0 0 1 12 5c6.5 0 10 7 10 7a21.8 21.8 0 0 1-3.2 4.6"></path>
                                <path d="M14.12 14.12a3 3 0 0 1-4.24-4.24"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Passwort speichern</button>
            </form>
        {% else %}
            <div style="text-align:center; margin-top: 1rem;">
                <a href="/forgot-password" class="btn btn-outline">Neuen Link anfordern</a>
            </div>
        {% endif %}

        <div style="margin-top: 1rem; text-align: center;">
            <a href="/login" style="color: var(--text-secondary); text-decoration: none; font-size: 0.9rem;">
                Zurück zum Login
            </a>
        </div>
    </div>
</div>
{% endblock %}
